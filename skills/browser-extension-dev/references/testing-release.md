# 调试与发布清单

## 目录
1. 本地调试
2. 回归用例
3. 打包规范
4. 发布前检查

## 1. 本地调试
1. 打开 `chrome://extensions` 并启用开发者模式。
2. 通过“加载已解压的扩展程序”选择扩展目录。
3. 在扩展卡片中打开：
- service worker 控制台
- popup 页面检查器
- options 页面检查器（如存在）
4. 修改代码后手动点击刷新，验证生命周期与状态恢复行为。

## 2. 回归用例
1. 首次安装：默认配置是否正确。
2. 升级安装：旧数据迁移是否兼容（尤其 `storage` 结构变更）。
3. 权限路径：拒绝授权时是否有降级处理。
4. 多标签页并发：消息通信是否串线。
5. 异常网络：超时、重试、用户提示是否可预期。
6. 国际化：至少验证默认语言与英文回退。

## 3. 打包规范
1. 确认不包含以下内容：
- `.git/`
- 测试快照、临时日志、调试脚本
- 本地密钥或私有配置
2. 固化版本号并同步更新 `manifest.json` 的 `version`。
3. 使用 zip 打包扩展根目录内容，不嵌套额外上层目录。

## 4. 发布前检查
1. 权限说明与实际行为一致，避免过度申请权限。
2. 商店文案、截图、隐私政策链接完整可访问。
3. 所有关键功能在 Chrome 稳定版完成冒烟测试。
4. 对 Firefox 兼容时，补充 `browser_specific_settings` 并执行 AMO 要求检查。
5. 记录已知限制与回滚方案，避免上线后无法快速止损。
